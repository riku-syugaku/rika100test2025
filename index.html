<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ç†ç§‘100é¡Œãƒ†ã‚¹ãƒˆ2025 - ã‚«ãƒ†ã‚´ãƒªé¸æŠ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
   <style>
    /* ------------------ 1. ãƒªã‚»ãƒƒãƒˆã¨åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« (å¤‰æ›´ãªã—) ------------------ */
    body {
        font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f9;
        font-size: 16px;
    }
    .container {
        max-width: 600px;
        width: 100%;
        margin: 0 auto;
        background-color: #fff;
        padding: 15px;
        border-radius: 0;
        box-shadow: none;
        min-height: 100vh;
        box-sizing: border-box;
        text-align: center;
    }
    h1 {
        font-size: 1.5em;
    }

    /* ------------------ 2. ã‚«ãƒ†ã‚´ãƒªé¸æŠç”»é¢ (è‰²ã‚’ç¶­æŒ) ------------------ */
    #category-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-top: 20px;
    }
    .category-button {
        padding: 15px;
        font-size: 18px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .category-button:hover {
        background-color: #0056b3;
    }

    /* ------------------ 3. ã‚¯ã‚¤ã‚ºç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« ------------------ */
    #quiz-area {
        text-align: left;
    }
    #question-area {
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 1.1em;
    }

    /* ğŸŒŸ å¼·åˆ¶ä¿®æ­£ 1: ã‚³ãƒ³ãƒ†ãƒŠã®æ¨ªä¸¦ã³è¨­å®šã‚’ä¸Šæ›¸ãã—ã€ãƒ–ãƒ­ãƒƒã‚¯è¡¨ç¤ºã«ç¢ºå®š ğŸŒŸ */
    #options-area {
        display: block !important; /* !important ã§å¼·åˆ¶çš„ã«ç¸¦ç©ã¿ã« */
        gap: 10px;
        margin-bottom: 10px;
    }

    /* ğŸŒŸ å¼·åˆ¶ä¿®æ­£ 2: ãƒœã‚¿ãƒ³ã‚’å¹…ã„ã£ã±ã„(100%)ã§å·¦å¯„ã›ã«ç¢ºå®š ğŸŒŸ */
    .option-button {
        display: block !important; /* !important ã§å¼·åˆ¶çš„ã«ãƒ–ãƒ­ãƒƒã‚¯è¦ç´ ã« */
        width: 100% !important; /* å¹…ã„ã£ã±ã„ */
        
        height: auto;
        min-height: 60px;
        padding: 15px 15px;
        cursor: pointer;

        /* è‰²è¨­å®š */
        border: 2px solid #007bff;
        background-color: #fff;
        color: #007bff;

        font-size: 17px;
        text-align: left; /* å·¦å¯„ã› */
        white-space: normal;
        box-sizing: border-box;
        line-height: 1.4;
        border-radius: 5px;
        margin-bottom: 10px; /* ç¸¦ã®éš™é–“ã‚’ä½œã‚‹ */
    }
    .option-button.selected {
        background-color: #007bff;
        color: white;
    }
    
    /* ğŸŒŸ æ³¨æ„æ›¸ãã®å›ã‚Šè¾¼ã¿é˜²æ­¢ ğŸŒŸ */
    #options-area p {
        width: 100%;
        margin-top: 5px;
        margin-bottom: 20px;
    }

    /* è§£ç­”/æ¬¡ã¸ãƒœã‚¿ãƒ³ */
    #submit-button {
        display: block;
        width: 100%;
        padding: 15px;
        margin-top: 25px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 20px;
    }

    /* ã‚¹ã‚³ã‚¢è¡¨ç¤º */
    #result-area {
        margin-top: 25px;
        padding: 15px 0;
        border-top: 2px dashed #ccc;
    }
    #score-display {
        font-weight: bold;
        font-size: 1.7em;
        color: #007bff;
        padding: 10px 0;
        margin-top: 15px;
    }
</style>
</head>
<body>

<div class="container">
    <h1>ç†ç§‘100é¡Œãƒ†ã‚¹ãƒˆ2025</h1>

    <div id="start-screen">
        <h2>æŒ‘æˆ¦ã™ã‚‹ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„</h2>
        <div id="category-buttons">
            </div>
    </div>

    <div id="quiz-area" style="display: none;">
        <h2 id="category-title"></h2>
        
        <div id="question-area">
            <p>ãƒ†ã‚¹ãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™...</p>
        </div>
    
        <div id="options-area">
            <button class="option-button" data-value="A"></button>
            <button class="option-button" data-value="B"></button>
            <button class="option-button" data-value="C"></button>
            <p style="font-size: 0.9em; margin-top: 10px;">â€» æ­£è§£ãŒè¤‡æ•°ã®å ´åˆã¯ã€è©²å½“ã™ã‚‹ãƒœã‚¿ãƒ³ã‚’ã™ã¹ã¦ã‚¿ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚</p>
        </div>
    
        <button id="submit-button">è§£ç­”ã™ã‚‹</button>
    
        <div id="result-area">
            <p id="feedback"></p>
            <p id="score-display"></p>
        </div>
    </div>
</div>

<script>
// --- JavaScript ã‚³ãƒ¼ãƒ‰é–‹å§‹ ---

// **********************************************
// ğŸŒŸ ç·¨é›†ã¯ã“ã®ã€ŒallQuestionsã€ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã§è¡Œã£ã¦ãã ã•ã„ ğŸŒŸ
// å•é¡Œé…åˆ—ã®æ›¸å¼: [å•é¡Œæ–‡, é¸æŠè‚¢A, é¸æŠè‚¢B, é¸æŠè‚¢C, æ­£è§£ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆ]
// **********************************************
const allQuestions = {
     "æ¤ç‰©ã®ã¤ãã‚Šã¨ã¯ãŸã‚‰ã":
    [
      ["å˜å­è‘‰é¡ã¯","ç¶­ç®¡æŸãŒè¼ªã®å½¢","ã²ã’æ ¹","å¹³è¡Œè„ˆ","BC"],
["èƒšç ã¯","è£¸å­æ¤ç‰©ã«ã‚‚ã‚ã‚‹","æˆé•·ã—ã¦ç¨®å­ã«ãªã‚‹","æˆé•·ã—ã¦æœå®Ÿã«ãªã‚‹","AB"],
["ã‚¿ãƒ³ãƒãƒã¯","åˆå¼èŠ±","é›¢å¼èŠ±","åŒå­è‘‰é¡","AC"],
["ãƒ¤ãƒ¢ãƒªã¯","ä¸¡ç”Ÿé¡","çˆ¬è™«é¡","è„Šæ¤å‹•ç‰©","BC"],
["è»Ÿä½“å‹•ç‰©ã®å†…è‡“ã‚’ãŠãŠã£ã¦ã„ã‚‹ã®ã¯","å¤–ã¨ã†è†œ","å¤–éª¨æ ¼","å†…éª¨æ ¼","A"],
["ãƒŸã‚¸ãƒ³ã‚³ã¯","å¾®ç”Ÿç‰©","ç”²æ®»é¡","è„Šæ¤å‹•ç‰©","AB"],
["æ’æ¸©å‹•ç‰©ã¯","å“ºä¹³é¡","é³¥é¡","çˆ¬è™«é¡","AB"],
["ãƒ‡ãƒ³ãƒ—ãƒ³ã¯åˆ†è§£ã•ã‚Œã¦","ãƒ¢ãƒã‚°ãƒªã‚»ãƒªãƒ‰ã«ãªã‚‹","ãƒ–ãƒ‰ã‚¦ç³–ã«ãªã‚‹","ã‚¢ãƒŸãƒé…¸ã«ãªã‚‹","C"],
["èµ¤è¡€çƒã«ã¯","ãƒ¢ãƒã‚°ãƒªã‚»ãƒªãƒ‰ãŒå«ã¾ã‚Œã‚‹","ãƒ˜ãƒ¢ã‚°ãƒ­ãƒ“ãƒ³ãŒå«ã¾ã‚Œã‚‹","ãƒˆãƒªãƒ—ã‚·ãƒ³ãŒå«ã¾ã‚Œã‚‹","B"],
["ç´°èŒã‚„ã‚¦ã‚¤ãƒ«ã‚¹ã‚’åˆ†è§£ã™ã‚‹ã®ã¯","è¡€å°æ¿","ç™½è¡€çƒ","èµ¤è¡€çƒ","B"],
    ],
   "å‹•ç‰©ã®ã¤ãã‚Šã¨ã¯ãŸã‚‰ã":  [
     ["ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã‚’åˆ†è§£ã™ã‚‹ã®ãŒ","ã™ã„æ¶²","èƒƒæ¶²","å”¾æ¶²","AB"],
["èƒ†æ±ã¯","æ¶ˆåŒ–é…µç´ ãŒå«ã¾ã‚Œã¦ã„ãªã„","è‚è‡“ã§ä½œã‚‰ã‚Œã‚‹","èƒ†ã®ã†ã§ä½œã‚‰ã‚Œã‚‹","AB"],
["èƒƒæ¶²ã«å«ã¾ã‚Œã‚‹æ¶ˆåŒ–é…µç´ ã¯","ãƒªãƒ‘ãƒ¼ã‚¼","ãƒšãƒ—ã‚·ãƒ³","ãƒˆãƒªãƒ—ã‚·ãƒ³","B"],
["æ¯ã‚’å¸ã†ã¨ãä¸ŠãŒã‚‹ã®ãŒ","ã‚ã£éª¨","æ¨ªéš”è†œ","è‚º","A"],
["è‚ºã«è¡€æ¶²ã‚’é€ã‚Šå‡ºã™ã®ãŒ","å·¦å¿ƒå®¤","å³å¿ƒæˆ¿","å³å¿ƒå®¤","C"],
["ãƒ™ãƒã‚¸ã‚¯ãƒˆæ¶²ãŒåå¿œã™ã‚‹ã®ã¯","ãƒ–ãƒ‰ã‚¦ç³–","ãƒ‡ãƒ³ãƒ—ãƒ³","ã‚¿ãƒ³ãƒ‘ã‚¯è³ª","A"],
["å‹•è„ˆè¡€ãŒæµã‚Œã¦ã„ã‚‹ã®ã¯","è‚ºé™è„ˆ","è‚ºå‹•è„ˆ","å¤§å‹•è„ˆ","AC"],
["ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¢ã¯","è‚è‡“ã§çª’ç´ ã«å¤‰ãˆã‚‰ã‚Œã‚‹","è…è‡“ã§å°¿ç´ ã«å¤‰ãˆã‚‰ã‚Œã‚‹","è‚è‡“ã§å°¿ç´ ã«å¤‰ãˆã‚‰ã‚Œã‚‹","C"],
["å…¨èº«ã‹ã‚‰è¡€æ¶²ãŒæµã‚Œã¦ãã‚‹ã®ãŒ","å³å¿ƒæˆ¿","å·¦å¿ƒæˆ¿","å·¦å¿ƒå®¤","A"],
["å¿ƒè‡“ã‹ã‚‰å‡ºã‚‹è¡€ç®¡ã¯","å‹•è„ˆ","é™è„ˆ","å¼ãŒãªã„","AC"],
    ],
    "åœ°éœ‡ã¨åœ°å±¤":[
       ["ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ã¯éœ‡æºã‹ã‚‰é ã„ã»ã©","å¤§ãã„","å°ã•ã„","è·é›¢ã¯é–¢ä¿‚ãªã„","C"],
["ãƒã‚°ãƒ‹ãƒãƒ¥ãƒ¼ãƒ‰ã¯ï¼‘å¤§ãããªã‚‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒ","32å€","64å€","1000å€","A"],
["éœ‡åº¦ã¯","10æ®µéš","7æ®µéš","æœ€å¤§ãŒ7","AC"],
["å¼•ããšã‚Šè¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã¯","æµ·æ´‹ãƒ—ãƒ¬ãƒ¼ãƒˆ","å¤§é™¸ãƒ—ãƒ¬ãƒ¼ãƒˆ","æ—¥æœ¬æµ·ãƒ—ãƒ¬ãƒ¼ãƒˆ","B"],
["å¤ç”Ÿä»£ã¯","ãƒ“ã‚«ãƒªã‚¢","ã‚µãƒ³ãƒ¨ã‚¦ãƒãƒ¥ã‚¦","ãƒ•ã‚ºãƒªãƒŠ","BC"],
["æ–‘ã‚Œã„å²©ã¯","ç­‰ç²’çŠ¶çµ„ç¹”","ç™½ã£ã½ã„","æ·±æˆå²©","AC"],
["ãƒã‚°ãƒãŒåœ°ä¸‹ã§ã‚†ã£ãã‚Šå†·ãˆå›ºã¾ã£ãŸã®ãŒ","ç«å±±å²©","æ·±æˆå²©","ç­‰ç²’çŠ¶çµ„ç¹”","BC"],
["å¡©é…¸ã§äºŒé…¸åŒ–ç‚­ç´ ãŒå‡ºã‚‹ã®ãŒ","ãƒãƒ£ãƒ¼ãƒˆ","å‡ç°å²©","çŸ³ç°å²©","C"],
["ãã‚‚ã‚Šã¯","é›²é‡ãŒ7","é›²é‡ãŒ9","è¨˜å·ãŒã€Œâ—ã€","BC"],
["åœ§åŠ›ã¯é¢ç©ãŒå¤§ãã„ã»ã©","å°ã•ã„","å¤§ãã„","é¢ç©ã¯é–¢ä¿‚ãªã„","A"],
    ],
    "å¤©æ°—ã¨å…‰ãƒ»éŸ³": [
      ["å±±é ‚ã«ã„ãã¨","è¢‹ãŒè†¨ã‚‰ã‚€","è¢‹ãŒã—ã¼ã‚€","æ°—åœ§ãŒå°ã•ããªã‚‹","AC"],
["ãƒ”ã‚¹ãƒˆãƒ³ã‚’å¼•ãã¨","æ¸©åº¦ãŒä¸ŠãŒã‚‹","ç©ºæ°—ãŒè†¨å¼µã™ã‚‹","æ°—åœ§ãŒå°ã•ããªã‚‹","BC"],
["å¯’å†·å‰ç·šã®é€šéå¾Œã¯","é¢¨å‘ãŒå—å¯„ã‚Šã«","é¢¨å‘ãŒåŒ—å¯„ã‚Šã«","æ€¥ã«æ¸©åº¦ãŒä¸‹ãŒã‚‹","BC"],
["ä¸Šæ˜‡æ°—æµã¯","ä½æ°—åœ§","é«˜æ°—åœ§","åæ™‚è¨ˆå›ã‚Š","AC"],
["é£½å’Œæ°´è’¸æ°—é‡ã¯æ¸©åº¦ãŒä¸‹ãŒã‚‹ã¨","å¤§ãããªã‚‹","å°ã•ããªã‚‹","æ¸©åº¦ã¯é–¢ä¿‚ãªã„","B"],
["æ¸©åº¦ãŒä¸ŠãŒã‚‹ã¨æ¹¿åº¦ã¯","ä¸ŠãŒã‚‹","ä¸‹ãŒã‚‹","æ¸©åº¦ã¯é–¢ä¿‚ãªã„","B"],
["å‡¸ãƒ¬ãƒ³ã‚ºã‹ã‚‰ç‰©ä½“ã‚’é›¢ã™ã¨åƒã¯","å°ã•ããªã‚‹","å¤§ãããªã‚‹","ã‚ˆã‚Šé ãã«è¦‹ãˆã‚‹","A"],
["å¼¦ã‚’å¼·ãå¼¾ãã¨éŸ³ãŒ","é«˜ããªã‚‹","æŒ¯å¹…ãŒå¤§ãããªã‚‹","å¤§ãããªã‚‹","BC"],
["å‡¸ãƒ¬ãƒ³ã‚ºã®ä¸ŠåŠåˆ†ã‚’éš ã™ã¨","å…¨ãè¦‹ãˆãªã„","åŠåˆ†è¦‹ãˆã‚‹","æš—ããªã‚‹","C"],
["10Î©ã¨15Î©ã®ä¸¦åˆ—å›è·¯ã§å…¨ä½“ã®æŠµæŠ—ã¯","25Î©","12Î©","6Î©","C"],
    ],
     "ç£ç•Œã¨åŒ–å­¦":  [
       ["ä¸¦åˆ—å›è·¯ã§é›»æºã®é›»åœ§ã¯","å„é›»çƒã®å’Œ","ã©ã“ã‚‚ç­‰ã—ã„","ç©Ã·å’Œ","B"],
["ä¸‹å‘ãã«é›»æµã‚’æµã™ã¨ç£ç•Œã®å‘ãã¯","æ™‚è¨ˆå›ã‚Š","åæ™‚è¨ˆå›ã‚Š","ç›´é€²ã™ã‚‹","A"],
["ç£ç•Œã¯","Næ¥µã‹ã‚‰Sæ¥µ","Sæ¥µã‹ã‚‰Næ¥µ","ç£åŠ›ç·šã®é–“éš”ãŒã›ã¾ã„ã¨ç£åŠ›ãŒå¼±ã„","A"],
["Sæ¥µã‚’é ã–ã‘ã‚‹ã¨ãã¨åŒã˜é›»æµã®å‘ãã¯","Næ¥µã‚’è¿‘ã¥ã‘ã‚‹","Sæ¥µã‚’è¿‘ã¥ã‘ã‚‹","Næ¥µã‚’é ã–ã‘ã‚‹","A"],
["æ°´ã‹ã‚‰æ°·ã§","ä½“ç©ãŒå°ã•ããªã‚‹","ä½“ç©ãŒå¤§ãããªã‚‹","å¯†åº¦ãŒå¤§ãããªã‚‹","B"],
["BTBæº¶æ¶²ã¯","é…¸æ€§ã§é’è‰²","é…¸æ€§ã§é»„è‰²","ã‚¢ãƒ«ã‚«ãƒªæ€§ã§ç·‘è‰²","B"],
["ãƒ•ã‚§ãƒãƒ¼ãƒ«ãƒ•ã‚¿ãƒ¬ã‚¤ãƒ³æº¶æ¶²ã¯","é…¸æ€§ã§ç„¡è‰²","ã‚¢ãƒ«ã‚«ãƒªæ€§ã§èµ¤è‰²","ã‚¢ãƒ«ã‚«ãƒªæ€§ã§é’è‰²","AB"],
["å¡©åŒ–ã‚³ãƒãƒ«ãƒˆç´™ã§","ã‚¢ãƒ«ã‚«ãƒªæ€§","é…¸æ€§","æ°´","C"],
["é‰„ã«å¡©é…¸ã§ç™ºç”Ÿã™ã‚‹ã®ãŒ","å¡©ç´ ","æ°´ç´ ","é…¸ç´ ","B"],
["å¡©åŒ–ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¦ãƒ ã¨æ°´é…¸åŒ–ãƒãƒªã‚¦ãƒ ã§","å¸ç†±åå¿œ","ç™ºç†±åå¿œ","å¡©ç´ ãŒç™ºç”Ÿ","A"],
    ],
};


// **********************************************
// âš ï¸ ã“ã®ä¸‹ã®å¤‰æ›ãƒ»å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯ã¯å¤‰æ›´ã—ãªã„ã§ãã ã•ã„ âš ï¸
// **********************************************
let questions = []; 
let currentQuestionIndex = 0;
let score = 0;
let selectedAnswers = []; 
let currentAnswerMap = {};


// HTMLè¦ç´ ã®å–å¾—
const startScreen = document.getElementById('start-screen');
const categoryButtonsArea = document.getElementById('category-buttons');
const quizArea = document.getElementById('quiz-area');
const categoryTitle = document.getElementById('category-title');
const questionArea = document.getElementById('question-area');
const optionButtons = document.querySelectorAll('.option-button');
const submitButton = document.getElementById('submit-button');
const feedbackElement = document.getElementById('feedback');
const scoreDisplay = document.getElementById('score-display'); 

// --- é–¢æ•°å®šç¾© ---

/**
 * ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°: é…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ (ãƒ•ã‚£ãƒƒã‚·ãƒ£ãƒ¼ãƒ»ã‚¤ã‚§ãƒ¼ãƒ„ãƒ»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ )
 */
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

/**
 * ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã€ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã«é…ç½®ã™ã‚‹
 */
function createCategoryButtons() {
    categoryButtonsArea.innerHTML = ''; 
    for (const categoryName in allQuestions) {
        const button = document.createElement('button');
        button.className = 'category-button';
        button.textContent = categoryName;
        button.onclick = () => startQuiz(categoryName);
        categoryButtonsArea.appendChild(button);
    }
}

/**
 * ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹ã™ã‚‹ (å•é¡Œã‚·ãƒ£ãƒƒãƒ•ãƒ«æ©Ÿèƒ½ä»˜ã)
 */
function startQuiz(categoryName) {
    // 1. å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™ï¼ˆç°¡æ˜“å½¢å¼ã‹ã‚‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼ã¸å¤‰æ›ï¼‰
    const rawData = allQuestions[categoryName];
    let initialQuestions = rawData.map(data => {
        return {
            question: data[0],
            options: [data[1], data[2], data[3]],
            correct: data[4],
        };
    });
    
    // 2. å•é¡Œé…åˆ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    questions = shuffleArray(initialQuestions);
    
    // 3. çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
    currentQuestionIndex = 0;
    score = 0;
    categoryTitle.textContent = categoryName;

    // 4. ç”»é¢ã‚’åˆ‡ã‚Šæ›¿ãˆ
    startScreen.style.display = 'none';
    quizArea.style.display = 'block';

    // 5. ã‚¯ã‚¤ã‚ºé–‹å§‹
    loadQuestion();
    updateScoreDisplay(); 
}


/**
 * å•é¡Œã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•° (é¸æŠè‚¢ãƒ©ãƒ³ãƒ€ãƒ é…ç½®ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨˜æ†¶)
 */
function loadQuestion() {
    if (currentQuestionIndex >= questions.length) {
        showFinalResult();
        return;
    }

    const q = questions[currentQuestionIndex];
    selectedAnswers = []; 
    currentAnswerMap = {}; // ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ãƒªã‚»ãƒƒãƒˆ

    // ğŸŒŸ é¸æŠè‚¢ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹
    const originalIndices = [0, 1, 2];
    const shuffledIndices = shuffleArray(originalIndices);
    
    // é¸æŠçŠ¶æ…‹ã®è§£é™¤ã¨ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®æ›´æ–°
    optionButtons.forEach((button, index) => {
        button.classList.remove('selected');
        button.disabled = false;
        const optionLetter = button.getAttribute('data-value'); // 'A', 'B', 'C'
        
        // ğŸŒŸ ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚ŒãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
        const originalIndex = shuffledIndices[index];
        const optionText = q.options[originalIndex];
        
        // ğŸŒŸ ãƒœã‚¿ãƒ³ã«è¡¨ç¤ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨­å®š
        button.textContent = `${optionLetter}. ${optionText}`;
        
        // ğŸŒŸ ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²
        // ä¾‹: ãƒœã‚¿ãƒ³ A (index 0) ã«ã€å…ƒã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ 2 ã®ãƒ†ã‚­ã‚¹ãƒˆãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸå ´åˆã€
        // currentAnswerMap['A'] = 2 ã¨ãªã‚‹
        currentAnswerMap[optionLetter] = originalIndex;
    });

    // å•é¡Œæ–‡ã®è¡¨ç¤º
    questionArea.innerHTML = `
        <h2>ç¬¬${currentQuestionIndex + 1}å•</h2>
        <p>${q.question}</p>
    `;
    feedbackElement.textContent = ''; 
    submitButton.textContent = 'è§£ç­”ã™ã‚‹';
    submitButton.onclick = handleSubmit;
    submitButton.style.display = 'block';
    document.getElementById('options-area').style.display = 'flex';
}




/**
 * é¸æŠè‚¢ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®å‡¦ç†
 */
function handleOptionClick(event) {
    const button = event.target;
    const value = button.getAttribute('data-value');

    if (selectedAnswers.includes(value)) {
        selectedAnswers = selectedAnswers.filter(ans => ans !== value);
        button.classList.remove('selected');
    } else {
        selectedAnswers.push(value);
        button.classList.add('selected');
    }
}

/**
 * è§£ç­”ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã®å‡¦ç† (æ­£ç¢ºãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åˆ¤å®š)
 */
/**
 * è§£ç­”ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã¨ãã®å‡¦ç† (æœ€çµ‚ä¿®æ­£ç‰ˆ: ãƒãƒƒãƒ”ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã§åˆ¤å®š)
 */
function handleSubmit() {
    if (currentQuestionIndex >= questions.length) {
        return;
    }

    const q = questions[currentQuestionIndex];
    
    // ğŸŒŸ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è§£ç­”ã‚’å…ƒã®æ­£è§£è¨˜å· (A, B, C) ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ç›´ã™
    let mappedAnswers = [];
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé¸æŠã—ãŸã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆï¼ˆ'A', 'B'ãªã©ï¼‰ã‚’ãƒ«ãƒ¼ãƒ—
    selectedAnswers.forEach(selectedLetter => {
        // currentAnswerMap ã‹ã‚‰ã€é¸æŠã•ã‚ŒãŸã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆãŒå…ƒã®å•é¡Œã®ã©ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«å¯¾å¿œã™ã‚‹ã‹ã‚’å–å¾—
        const originalIndex = currentAnswerMap[selectedLetter];

        // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ­£è§£è¨˜å·ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ mappedAnswers ã«è¿½åŠ 
        if (originalIndex === 0) mappedAnswers.push('A');
        else if (originalIndex === 1) mappedAnswers.push('B');
        else if (originalIndex === 2) mappedAnswers.push('C');
    });

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€çµ‚çš„ãªè§£ç­”ï¼ˆå…ƒã®æ­£è§£è¨˜å·ãƒ™ãƒ¼ã‚¹ï¼‰
    const sortedUserAnswer = mappedAnswers.sort().join('');
    // å•é¡Œå®šç¾©ã®æ­£è§£
    const sortedCorrect = q.correct.split('').sort().join('');

    // --- æ­£èª¤åˆ¤å®šã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ ---
    if (sortedUserAnswer === sortedCorrect) {
        // âœ… æ­£è§£ã®å ´åˆ
        feedbackElement.style.color = 'green';
        feedbackElement.textContent = 'ã€æ­£è§£ã§ã™ï¼ã€‘ç´ æ™´ã‚‰ã—ã„ï¼';
        score++; 
    } else {
        // âŒ ä¸æ­£è§£ã®å ´åˆï¼ˆå…·ä½“çš„ãªé¸æŠè‚¢åã‚’è¡¨ç¤ºï¼‰
        const correctOptionsText = q.correct.split('').map(letter => {
            if (letter === 'A') return q.options[0];
            if (letter === 'B') return q.options[1];
            if (letter === 'C') return q.options[2];
        });
        
        let correctMessage;
        if (correctOptionsText.length === 1) {
            correctMessage = `æ­£è§£ã¯ã€Œ${correctOptionsText[0]}ã€ã§ã™ã€‚`;
        } else if (correctOptionsText.length === 2) {
            correctMessage = `æ­£è§£ã¯ã€Œ${correctOptionsText[0]}ã€ã¨ã€Œ${correctOptionsText[1]}ã€ã§ã™ã€‚`;
        } else if (correctOptionsText.length === 3) {
            correctMessage = `æ­£è§£ã¯ã€Œ${correctOptionsText[0]}ã€ã€ã€Œ${correctOptionsText[1]}ã€ã€ãã—ã¦ã€Œ${correctOptionsText[2]}ã€ã§ã™ã€‚`;
        } else {
             correctMessage = `æ­£è§£ã¯ã€Œ${q.correct}ã€ï¼ˆ${correctOptionsText.join('ã€')}ï¼‰ã§ã—ãŸã€‚`;
        }
        
        feedbackElement.style.color = 'red';
        feedbackElement.textContent = `ã€ä¸æ­£è§£ã§ã™ã€‘${correctMessage}`;
    }
    // --- æ­£èª¤åˆ¤å®šã“ã“ã¾ã§ ---

    submitButton.textContent = 'æ¬¡ã®å•é¡Œã¸';
    submitButton.onclick = moveToNextQuestion;
    optionButtons.forEach(button => button.disabled = true);
    updateScoreDisplay();
}
/**
 * æ¬¡ã®å•é¡Œã¸é€²ã‚€
 */
function moveToNextQuestion() {
    currentQuestionIndex++;
    updateScoreDisplay(); 
    loadQuestion();
}

/**
 * ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’æ›´æ–°
 */
function updateScoreDisplay() {
    if (questions.length === 0) {
        scoreDisplay.textContent = 'ç¾åœ¨ã®ã‚¹ã‚³ã‚¢: 0 / 0å•';
        return;
    }
    scoreDisplay.textContent = `ç¾åœ¨ã®ã‚¹ã‚³ã‚¢: ${score} / ${questions.length}å•`;
}

/**
 * æœ€çµ‚çµæœã‚’è¡¨ç¤º
 */
function showFinalResult() {
    questionArea.innerHTML = `
        <h2>ã€Œ${categoryTitle.textContent}ã€çµ‚äº†ï¼</h2>
        <p>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</p>
    `;
    feedbackElement.style.color = 'black';
    feedbackElement.textContent = `æœ€çµ‚çµæœ: ${questions.length}å•ä¸­ã€${score}å•æ­£è§£ï¼`;
    scoreDisplay.textContent = `æ­£ç­”ç‡: ${((score / questions.length) * 100).toFixed(1)}%`;
    
    // ãƒœã‚¿ãƒ³ã‚’ã€Œåˆ¥ã®ã‚«ãƒ†ã‚´ãƒªã«æŒ‘æˆ¦ã€ã«å¤‰æ›´
    submitButton.style.display = 'block';
    submitButton.textContent = 'åˆ¥ã®ã‚«ãƒ†ã‚´ãƒªã«æŒ‘æˆ¦ã™ã‚‹';
    submitButton.onclick = () => {
        // ç”»é¢ã‚’ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã«æˆ»ã™ï¼ˆãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
        window.location.reload(); 
    };
    
    document.getElementById('options-area').style.display = 'none';
}


// --- åˆæœŸåŒ–å‡¦ç† ---

// é¸æŠè‚¢ãƒœã‚¿ãƒ³ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
optionButtons.forEach(button => {
    button.addEventListener('click', handleOptionClick);
});

// æœ€åˆã«ã‚«ãƒ†ã‚´ãƒªé¸æŠãƒœã‚¿ãƒ³ã‚’ä½œæˆã—ã¦è¡¨ç¤ºã™ã‚‹
createCategoryButtons();

// --- JavaScript ã‚³ãƒ¼ãƒ‰çµ‚äº† ---
</script>

</body>
</html>
